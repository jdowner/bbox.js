<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>bbox test</title>
  </head>
  <link rel="stylesheet" href="css/qunit-1.14.0.css">
  <script src="src/bbox.js"></script>
  <script src="lib/qunit-1.14.0.js"></script>
  <body>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
  </body>
  <script>
    test("smoke-test", function(){
      ok(true)
    })

    module("qroots");

    test("x^2 + 2 x + 1", function(){
      var a = 1;
      var b = 2;
      var c = 1;

      var roots = bbox.qroots(a, b, c);

      equal(1, roots.length);
      equal(-1, roots[0]);
    })

    test("x^2 + 3 x + 2", function(){
      // (x + 1)(x + 2)
      var a = 1;
      var b = 3;
      var c = 2;

      var roots = bbox.qroots(a, b, c);

      equal(2, roots.length);
      equal(-2, roots[0]);
      equal(-1, roots[1]);
    })

    test("x^2 - x - 2", function(){
      // (x + 1)(x - 2)
      var a = 1;
      var b = -1;
      var c = -2;

      var roots = bbox.qroots(a, b, c);

      equal(2, roots.length);
      equal(-1, roots[0]);
      equal(2, roots[1]);
    })

    test("2 x^2 - x - 1", function(){
      // (2 x + 1)(x - 1)
      var a = 2;
      var b = -1;
      var c = -1;

      var roots = bbox.qroots(a, b, c);

      equal(2, roots.length);
      equal(-0.5, roots[0]);
      equal(1.0, roots[1]);
    })


    module("inflection points");

    test("#1", function(){
      var bezier = {
        x0: 0,
        y0: 0,
        x1: 0,
        y1: 1,
        x2: 1,
        y2: 1,
        x3: 1,
        y3: 0
      };

      var pts = bbox.inflection_points(bezier)

      equal(pts.length, 1);
      ok(Math.abs(bbox.bezier_derivative(bezier, pts[0]).dy) < 1.0e-8);
    })

    test("#2", function(){
      var bezier = {
        x0: 0,
        y0: 0,
        x1: 0,
        y1: -1,
        x2: 1,
        y2: 1,
        x3: 1,
        y3: 0
      };

      var pts = bbox.inflection_points(bezier)

      equal(pts.length, 2);

      ok(Math.abs(bbox.bezier_derivative(bezier, pts[0]).dy) < 1.0e-8);
      ok(Math.abs(bbox.bezier_derivative(bezier, pts[1]).dy) < 1.0e-8);
    })

    test("#3", function(){
      var bezier = {
        x0: 0,
        y0: 0,
        x1: 1,
        y1: -1,
        x2: 0,
        y2: 1,
        x3: 1,
        y3: 0
      };

      var pts = bbox.inflection_points(bezier)

      equal(pts.length, 3);

      ok(Math.abs(bbox.bezier_derivative(bezier, pts[0]).dy) < 1.0e-8);
      ok(Math.abs(bbox.bezier_derivative(bezier, pts[1]).dx) < 1.0e-8);
      ok(Math.abs(bbox.bezier_derivative(bezier, pts[2]).dy) < 1.0e-8);
    })
  </script>
</html>
